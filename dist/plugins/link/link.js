KindEditor.plugin("link",function(e){var l=this;l.plugin.link={edit:function(){var i=l.lang("link."),n='<div style="padding:20px;"><div class="ke-dialog-row"><label for="keUrl" style="width:60px;">'+i.url+'</label><input type="text" id="keUrl" name="url" style="width:306px;" /></div><div class="ke-dialog-row""><label for="keType" style="width:60px;">'+i.linkType+'</label><select id="keType" name="type"></select></div></div>',t=l.createDialog({name:"link",width:450,title:l.lang("link"),body:n,yesBtn:{name:l.lang("yes"),click:function(i){var n=e.trim(a.val());if("http://"==n||e.invalidUrl(n))return alert(l.lang("invalidUrl")),void a[0].focus();l.exec("createlink",n,d.val()).hideDialog().focus()}}}).div,a=e('input[name="url"]',t),d=e('select[name="type"]',t);a.val("http://"),d[0].options[0]=new Option(i.newWindow,"_blank"),d[0].options[1]=new Option(i.selfWindow,""),l.cmd.selection();var o=l.plugin.getSelectedLink();o&&(l.cmd.range.selectNode(o[0]),l.cmd.select(),a.val(o.attr("data-ke-src")),d.val(o.attr("target"))),a[0].focus(),a[0].select()},remove:function(){l.exec("unlink",null)}},l.clickToolbar("link",l.plugin.link.edit)});